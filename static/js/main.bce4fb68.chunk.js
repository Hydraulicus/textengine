(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){e.exports=a.p+"static/media/elephant.43105bae.svg"},124:function(e,t,a){e.exports=a.p+"static/media/horse.aa2e0ee6.svg"},125:function(e,t,a){e.exports=a.p+"static/media/react.5d5d9eef.svg"},126:function(e,t,a){e.exports=a.p+"static/media/rooster.0da0e356.svg"},137:function(e,t,a){e.exports=a(324)},142:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(9),r=a.n(o),l=(a(142),a(30)),c=a(357),s=a(359),u=a(360),d=a(361),h=a(123),m=a.n(h),f=a(124),v=a.n(f),p=a(125),g=a.n(p),x=a(126),w=a.n(x),b={elephant:m.a,horse:v.a,react:g.a,rooster:w.a},y=Object(c.a)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden"},gridList:{cursor:"pointer",textTransform:"capitalize",width:450},gridListTile:{},info:{fontSize:"0.5rem"},mascotImg:{height:"120px",width:"120px",border:"#555 2px solid",borderRadius:"5px"}}}),E=[{img:b.elephant,title:"elephant",author:"Nature"},{img:b.horse,title:"horse",author:"Nature"},{img:b.rooster,title:"rooster",author:"Nature"},{img:b.react,title:"react",author:"Facebook"}],O=function(e){var t=e.eventHandler,a=y();return i.a.createElement("div",{className:a.root},i.a.createElement(s.a,{variant:"h6",className:a.title,color:"primary"},"Please choose mascot"),i.a.createElement(u.a,{cellHeight:150,spacing:3,cols:3,className:a.gridList},E.map(function(e){return i.a.createElement(d.a,{key:e.img,className:a.gridListTile},i.a.createElement("img",{className:a.mascotImg,src:e.img,alt:e.title,onClick:function(e){t({mascot:e.target.alt})}}))})))},S=a(41),T=a(13),j=a(58),k=a.n(j),C=a(83),N=a.n(C),A=a(363),I=a(325),P=a(122),z=[{value:"Arvo",label:"Arvo"},{value:"AtomicAge",label:"AtomicAge"},{value:"Bahiana",label:"Bahiana"},{value:"BerkshireSwash",label:"BerkshireSwash"},{value:"BlendaScript",label:"BlendaScript"},{value:"LilitaOne",label:"LilitaOne"},{value:"GrandHotel",label:"GrandHotel"},{value:"MedulaOne",label:"MedulaOne"},{value:"PirataOne",label:"PirataOne"},{value:"Teko",label:"Teko"}],F=Object(c.a)(function(e){return{root:{padding:e.spacing(1,2),margin:e.spacing(3,2)},container:{display:"flex",flexWrap:"nowrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"12rem",fontFamily:"AtomicAge"},colorPicker:{backgroundColor:"red"},dense:{marginTop:19},menu:{width:200}}}),H=function(e){var t=e.eventHandler,a=e.props,o=a.texts,r=F(),l=function(e,a){return function(n){var i=n.target.value;if(!("text"===a&&i.length>30)){var r=o;r[e]=Object(T.a)({},o[e],Object(S.a)({},a,i.toUpperCase())),t({texts:r})}}},c=function(e,a){return function(n){var i=o;i[e]=Object(T.a)({},o[e],Object(S.a)({},a,n)),t({texts:i})}};return i.a.createElement(n.Fragment,null,i.a.createElement("h3",{style:{fontFamily:a.fontFamily}},"Please select options"),o.map(function(e,t){return i.a.createElement(I.a,{className:r.root,key:e.id},i.a.createElement(P.a,{id:e.id,label:"".concat(e.label," ").concat(e.text.length," / ").concat(30),defaultValue:e.text,onChange:l(t,"text"),className:k()(r.textField,r.dense)}),i.a.createElement(P.a,{id:"standard-select-currency-native",select:!0,label:"Select font",className:r.textField,value:a.fontFamily,onChange:l(t,"fontFamily"),SelectProps:{native:!0,MenuProps:{className:r.menu}},helperText:"Please select font",margin:"normal"},z.map(function(e){return i.a.createElement("option",{key:e.value,value:e.value,style:{fontFamily:e.value}},e.label)})),i.a.createElement(A.a,{container:!0,justify:"center",spacing:3},i.a.createElement(A.a,{item:!0,xs:5},i.a.createElement(N.a,{name:"color",label:"strokeStyle",value:e.strokeStyle,onChange:c(t,"strokeStyle")})),i.a.createElement(A.a,{item:!0,xs:5},i.a.createElement(N.a,{name:"color",label:"filling",value:e.fillStyle,onChange:c(t,"fillStyle")}))))}))},D=a(365),R=a(364),B=a(36),W=a.n(B),L=a(61),M=a(128),Q={width:3600,height:3600},_={texts:[{id:"topText",label:"top text",fontFamily:"AtomicAge",fontSize:1e3,text:"TOP STRING",width:3200,offsetTop:50,lineWidth:26,fillStyle:"#c35",strokeStyle:"#226",distortion:500},{id:"bottomText",label:"bottom text",fontFamily:"AtomicAge",fontSize:900,text:"BOTTOM STRING",width:3200,offsetTop:2300,lineWidth:26,fillStyle:"#eeaa59",strokeStyle:"#226",distortion:-500}],saveHQ:!1,saveLQ:!1,canva:Object(T.a)({},{width:720,height:720})},G=function(e,t){var a=document.createElement("div");a.style.position="fixed",a.style.top="0px",a.style.left="0px",a.style.width="0px",a.style.height="0px",a.style.overflow="hidden";var n=document.createElement("span");n.style.font=t,n.innerText=e,document.body.appendChild(n);var i=n.getBoundingClientRect();return document.body.removeChild(n),i};function Y(e,t){this.x=0,this.y=0,this.index=0,this.moveRight=function(){this.arePixelsToTheRight()?(this.x++,this.index+=4):this.moveDown()},this.moveDown=function(){this.x=0,this.y++,this.index=this.y*e*4},this.arePixelsToTheRight=function(){return this.x<e-1},this.noMorePixels=function(){return this.index>=e*t*4-4}}var J=function(e){for(var t,a=new Y(e.width,e.height),n=!1,i=!1,o=null,r=null;!a.noMorePixels();)if(n){if(!a.arePixelsToTheRight()){if(t){r=a.y,i=!0;break}t=!0,a.moveDown()}V(e.imageData,a.index)?a.moveRight():(t=!1,a.moveDown())}else V(e.imageData,a.index)?a.moveRight():(o=a.y,n=!0,a.moveDown());return{foundTopText:n,foundBottomText:i,topTextY:o,bottomTextY:r}};function V(e,t){return 0===e.data[t+3]}function q(e,t){return e?window.getComputedStyle(e)[t]:null}var U=function(e){for(var t=e.ctx,a=e.imageData,n=e.amplitude,i=e.curve,o=.5*a.width||t.width/2,r=n<0?-1:0,l=t.createImageData(a.width,a.height+Math.abs(n)),c=0;c<a.height;c++)for(var s=0;s<a.width;s++){var u=[a.data[4*(c*a.width+s)+0],a.data[4*(c*a.width+s)+1],a.data[4*(c*a.width+s)+2],a.data[4*(c*a.width+s)+3]],d=(s-o)/o,h=c+(Math.round(n*i(d))+r*n);l.data[4*(h*l.width+s)+0]=u[0],l.data[4*(h*l.width+s)+1]=u[1],l.data[4*(h*l.width+s)+2]=u[2],l.data[4*(h*l.width+s)+3]=u[3]}return l},K=function(e){var t=e.ctx,a=e.tCtx,n=e.text,i=void 0===n?"1234567890abcdefghihklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ":n,o=e.fontSize,r=void 0===o?80:o,l=e.fontFamily,c=void 0===l?"AtomicAge":l,s=e.width,u=void 0===s?3400:s,d=e.offsetTop,h=void 0===d?50:d,m=e.distortion,f=void 0===m?0:m,v=e.lineWidth,p=void 0===v?3:v,g=e.fillStyle,x=void 0===g?"#4444f1":g,w=e.strokeStyle,b=void 0===w?"#4444f1":w,y=e.designedSize,E=void 0===y?{width:3600,height:3600}:y,O=E.width,S=E.height,T=t.canvas,j=T.width,k=T.height,C=j/O,N=k/S,A=(O-u)*C/2,I=function(e){var t=e.fontSize||q(e.element,"font-size")||"100px",a=(e.fontWeight||q(e.element,"font-weight")||"normal")+" "+t+" "+(e.fontFamily||q(e.element,"font-family")||"Arial"),n=G(e.text,a),i=document.createElement("canvas"),o=i.getContext("2d");i.width=n.width,i.height=1.2*n.height,o.font=a,o.fillText(e.text,0,t.replace("px",""));var r=o.getImageData(0,0,i.width,i.height),l=J({width:i.width,height:i.height,imageData:r,options:e});return l.foundTopText?l.foundBottomText?{width:n.width,height:l.bottomTextY-l.topTextY,yOffset:-l.topTextY}:{width:n.width,height:i.height-l.topTextY,yOffset:-l.topTextY}:{width:n.width,height:0,yOffset:0}}({text:i,fontSize:"".concat(N*r,"px"),fontFamily:c}),P=I.width,z=I.height,F=I.yOffset,H=C*u/P>1?C*u/P:1;console.log("fontFamily=",c,"fontSize=",r,"yOffset=",F);var D=3,R=3;a.strokeStyle=b,a.fillStyle=x,a.lineWidth=p,a.stroke(),a.textAlign="left",a.font="".concat(N*r,"px ").concat(c),a.fillText(i,D,z+3,C*u),a.strokeText(i,D,z+3,C*u);var B=f*N;if(0!==f){var W=a.getImageData(D-3,R-3,C*u/H+6+3+3,z+6+3+3),L=U({ctx:a,imageData:W,amplitude:B,curve:function(e){return e*e}});a.putImageData(L,D-3,R-3)}var M=new Image;return M.src=a.canvas.toDataURL(),a.clearRect(0,0,a.canvas.width,a.canvas.height),new Promise(function(e){M.onload=function(){t.drawImage(M,0,0,u*C/H+6+3,z+6+3+2*Math.abs(B),A,h*N,u*C,z+2*Math.abs(B)),e("drown")}})},X=function(e){var t=e.ctx,a=e.id,n=void 0===a?"elephant":a,i=new Image(t.canvas.width,t.canvas.height);return i.src=b[n],new Promise(function(e){i.onload=function(){t.drawImage(i,0,0,t.canvas.width,t.canvas.height),e("drown")}})},Z=function(e,t,a){return $.apply(this,arguments)};function $(){return($=Object(L.a)(W.a.mark(function e(t,a,n){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.fontFamily,t.fillStyle="#fff",t.save(),e.next=5,K(Object(T.a)({ctx:t,tCtx:a},n.texts[0]));case 5:return e.next=7,ee(K,Object(T.a)({ctx:t,tCtx:a},n.texts[1],{outline1:{color:"#f00",lineWidth:26},outline2:{color:"#ff0",lineWidth:26}}));case 7:return e.next=9,X({ctx:t,id:n.mascot});case 9:return e.next=11,K(Object(T.a)({ctx:t,tCtx:a},n.texts[1]));case 11:return e.abrupt("return",new Promise(function(e){t.restore(),e("all are drown")}));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(e,t){var a=t.outline1,n=a.color,i=void 0===n?"#f00":n,o=a.lineWidth,r=t.outline2,l=r.color,c=void 0===l?"#00f":l,s=r.lineWidth,u=(t.distortion,t.fontSize+o+s),d=t.offsetTop-o-s,h=t.width+2*o+2*s;return e(Object(T.a)({},t,{fillStyle:i,strokeStyle:c,fontSize:u,lineWidth:s,offsetTop:d,width:h}))}function te(e){var t=function(e){var t=Object(n.useState)(Object(T.a)({},JSON.parse(localStorage.getItem("draw-app")),e)),a=Object(l.a)(t,2),i=a[0],o=a[1];return Object(n.useEffect)(function(){localStorage.setItem("draw-app",JSON.stringify(i))}),[i,o]}(e),a=Object(l.a)(t,2),i=a[0],o=a[1],r=Object(n.useRef)(null),c=Object(n.useRef)(null),s=function(e){r.current.toBlob(function(t){Object(M.saveAs)(t,e)})};function u(){return(u=Object(L.a)(W.a.mark(function e(t,a,n){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t,a,n);case 2:(n.saveLQ||n.saveHQ)&&(s("export_LQ_".concat(Date.now(),".png")),o(Object(T.a)({},n,{saveLQ:!1,saveHQ:!1})));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){var e=r.current,t=c.current,a=e.getContext("2d"),n=t.getContext("2d"),o=i.saveHQ?Object(T.a)({},Q):i.canva;e.setAttribute("width",o.width),e.setAttribute("height",o.height),t.setAttribute("width",o.width),t.setAttribute("height",o.height),a.clearRect(0,0,window.innerWidth,window.innerHeight),function(e,t,a){u.apply(this,arguments)}(a,n,i)}),[i,o,r,c]}var ae=a(42),ne=a.n(ae),ie=Object(c.a)(function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",margin:"auto",color:e.palette.text.secondary}}});var oe=function(e){var t=e.HQSize,a=e.initialProps,o=te(Object(T.a)({},a)),r=Object(l.a)(o,4),c=r[0],s=r[1],u=r[2],d=r[3];function h(e){s(Object(T.a)({},c,e))}var m=ie();return i.a.createElement(n.Fragment,null,i.a.createElement(me,null),i.a.createElement(A.a,{container:!0,spacing:3,className:m.root},i.a.createElement(A.a,{item:!0,xs:3},i.a.createElement(I.a,{className:m.paper},i.a.createElement(H,{eventHandler:h,props:c}))),i.a.createElement(A.a,{item:!0,xs:5},i.a.createElement("div",{className:ne.a.canvaContainer},i.a.createElement("canvas",{id:"THEMAINCANVAS",className:ne.a.canvases,ref:u})),i.a.createElement(A.a,{container:!0,justify:"center"},i.a.createElement(R.a,{variant:"contained","aria-label":"small contained button group"},i.a.createElement(D.a,{onClick:function(){s(Object(T.a)({},c,{saveLQ:!0}))}},"Save as low-quality PNG (72 DPI)"),i.a.createElement(D.a,{onClick:function(){s(Object(T.a)({},c,{saveHQ:!0},t))}},"Save as high-quality PNG (300 DPI)")))),i.a.createElement(A.a,{item:!0,xs:4},i.a.createElement(O,{eventHandler:h}))),i.a.createElement("canvas",{className:k()(ne.a.serviceCanvas,ne.a.canvases),ref:d}))},re=a(366),le=a(367),ce=a(368),se=a(362),ue=function(e){return i.a.createElement(se.a,e,i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),i.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},de=function(e){return i.a.createElement(se.a,e,i.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"}))},he=Object(c.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}});function me(){var e=he();return i.a.createElement(re.a,{position:"static",style:{background:"transparent",boxShadow:"none"}},i.a.createElement(le.a,null,i.a.createElement(ce.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},i.a.createElement(ue,{color:"primary"})),i.a.createElement(s.a,{variant:"h6",className:e.title,color:"primary"},"Create your style"),i.a.createElement("div",null,i.a.createElement(ce.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit"},i.a.createElement(de,{color:"primary"})))))}a(322),a(323);var fe=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],r=a?i.a.createElement(oe,Object.assign({HQSize:Q},_)):i.a.createElement("span",{style:{fontFamily:"Arvo"}},"Loading...");return Object(n.useEffect)(function(){console.log("mounted"),o(!0)},[]),i.a.createElement(n.Fragment,null,r)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},42:function(e,t,a){e.exports={canvases:"Index_canvases__3cujD",canvaContainer:"Index_canvaContainer__xHRDS",serviceCanvas:"Index_serviceCanvas__B4yWI"}}},[[137,1,2]]]);
//# sourceMappingURL=main.bce4fb68.chunk.js.map