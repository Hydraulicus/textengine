(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){e.exports=a.p+"static/media/elephant.217a2486.svg"},130:function(e,t,a){e.exports=a.p+"static/media/horse.125f0807.svg"},131:function(e,t,a){e.exports=a.p+"static/media/react.123a7b03.svg"},132:function(e,t,a){e.exports=a.p+"static/media/rooster.8df9de73.svg"},145:function(e,t,a){e.exports=a(332)},150:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(10),o=a.n(r),c=(a(150),a(34)),l=a(367),s=a(333),u=a(369),h=a(370),d=a(129),m=a.n(d),f=a(130),v=a.n(f),p=a(131),g=a.n(p),x=a(132),w=a.n(x),b={elephant:m.a,horse:v.a,react:g.a,rooster:w.a},y=Object(l.a)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden"},gridList:{cursor:"pointer",textTransform:"capitalize",width:450},gridListTile:{},info:{fontSize:"0.5rem"},mascotImg:{height:"120px",width:"120px",border:"#555 2px solid",borderRadius:"5px"}}}),E=[{img:b.elephant,title:"elephant",author:"Nature"},{img:b.horse,title:"horse",author:"Nature"},{img:b.rooster,title:"rooster",author:"Nature"},{img:b.react,title:"react",author:"Facebook"}],O=function(e){var t=e.eventHandler,a=y();return i.a.createElement("div",{className:a.root},i.a.createElement(s.a,{variant:"h6",className:a.title,color:"primary"},"Please choose mascot"),i.a.createElement(u.a,{cellHeight:150,spacing:3,cols:3,className:a.gridList},E.map(function(e){return i.a.createElement(h.a,{key:e.img,className:a.gridListTile},i.a.createElement("img",{className:a.mascotImg,src:e.img,alt:e.title,onClick:function(e){t({mascot:e.target.alt})}}))})))},j=a(36),T=a(13),S=a(46),k=a.n(S),C=a(68),N=a.n(C),P=a(372),I=a(378),A=a(373),H=a(334),D=a(128),z=[{value:"Arvo",label:"Arvo"},{value:"AtomicAge",label:"AtomicAge"},{value:"Bahiana",label:"Bahiana"},{value:"BerkshireSwash",label:"BerkshireSwash"},{value:"BlendaScript",label:"BlendaScript"},{value:"LilitaOne",label:"LilitaOne"},{value:"GrandHotel",label:"GrandHotel"},{value:"MedulaOne",label:"MedulaOne"},{value:"PirataOne",label:"PirataOne"},{value:"Teko",label:"Teko"}],B=Object(l.a)(function(e){return{root:{padding:e.spacing(1,2),margin:e.spacing(3,2)},container:{display:"flex",flexWrap:"nowrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},colorPicker:{backgroundColor:"red"},dense:{marginTop:19},menu:{width:200},margin:{margin:e.spacing(1)}}}),F=function(e){var t,a=e.eventHandler,r=e.props,o=r.texts,c=r.outline,l=B(),s=function(e,t){return function(n){var i=n.target.value;if(!("text"===t&&i.length>30)){"text"===t&&(i=i.toUpperCase());var r=o;r[e]=Object(T.a)({},o[e],Object(j.a)({},t,i)),a({texts:r})}}},u=function(e,t){return function(n){var i=o;i[e]=Object(T.a)({},o[e],Object(j.a)({},t,n)),a({texts:i})}},h=function(e){return i.a.createElement(I.a,{color:"default",checked:e.visible,inputProps:{"aria-label":"checkbox with default color"}})};return i.a.createElement(n.Fragment,null,i.a.createElement("h3",{style:{fontFamily:r.fontFamily}},"Please select options"),o.map(function(e,t){return i.a.createElement(H.a,{className:l.root,key:e.id},i.a.createElement(D.a,{id:e.id,label:"".concat(e.label," ").concat(e.text.length," / ").concat(30),defaultValue:e.text,onChange:s(t,"text"),className:k()(l.textField,l.dense),variant:"outlined",InputProps:{startAdornment:i.a.createElement(P.a,{position:"start"},h(e))}}),i.a.createElement(D.a,{id:"standard-select-currency-native",select:!0,variant:"outlined",label:"Select font",className:k()(l.margin,l.textField),value:e.fontFamily,onChange:s(t,"fontFamily"),SelectProps:{native:!0,MenuProps:{className:l.menu}},helperText:"Please select font",margin:"normal"},z.map(function(e){return i.a.createElement("option",{key:e.value,value:e.value,style:{fontFamily:e.value}},e.label)})),i.a.createElement(A.a,{container:!0,justify:"center",spacing:3},i.a.createElement(A.a,{item:!0,xs:5},i.a.createElement(N.a,{name:"color",label:"strokeStyle",value:e.strokeStyle,onChange:u(t,"strokeStyle")})),i.a.createElement(A.a,{item:!0,xs:5},i.a.createElement(N.a,{name:"color",label:"filling",value:e.fillStyle,onChange:u(t,"fillStyle")}))))}),i.a.createElement("h3",null,"Please define outline props"),i.a.createElement(A.a,{container:!0,justify:"center",spacing:3},i.a.createElement(A.a,{item:!0,xs:2},i.a.createElement(I.a,{color:"default",checked:c.show,onChange:(t="show",function(e){var n=e.target.checked,i=Object(T.a)({},c,Object(j.a)({},t,n));a({outline:i})}),value:c.show,inputProps:{"aria-label":"show"}})),i.a.createElement(A.a,{item:!0,xs:4},i.a.createElement(N.a,{name:"outlineColor",label:"color",value:c.color,onChange:function(e){return function(t){var n=Object(T.a)({},c,Object(j.a)({},e,t));a({outline:n})}}("color")}))))},R=a(134),L=a(375),M=a(374),W=a(27),Q=a.n(W),_=a(40),G=a(135),Y={width:3600,height:3600},U={outline:{show:!0,color:"#aa2",lineWidth:60},texts:[{id:"topText",label:"top text",fontFamily:"Arvo",fontSize:1e3,text:"TOP STRING",width:3200,offsetTop:50,lineWidth:26,fillStyle:"#c35",strokeStyle:"#226",distortion:500,visible:!0},{id:"bottomText",label:"bottom text",fontFamily:"Arvo",fontSize:900,text:"BOTTOM STRING",width:3200,offsetTop:2300,lineWidth:26,fillStyle:"#eeaa59",strokeStyle:"#226",distortion:-100,visible:!0}],saveHQ:!1,saveLQ:!1,canva:Object(T.a)({},{width:720,height:720})},q=function(e,t){var a=document.createElement("div");a.style.position="fixed",a.style.top="0px",a.style.left="0px",a.style.width="0px",a.style.height="0px",a.style.overflow="hidden";var n=document.createElement("span");n.style.font=t,n.innerText=e,document.body.appendChild(n);var i=n.getBoundingClientRect();return document.body.removeChild(n),i};function J(e,t){this.x=0,this.y=0,this.index=0,this.moveRight=function(){this.arePixelsToTheRight()?(this.x++,this.index+=4):this.moveDown()},this.moveDown=function(){this.x=0,this.y++,this.index=this.y*e*4},this.arePixelsToTheRight=function(){return this.x<e-1},this.noMorePixels=function(){return this.index>=e*t*4-4}}var V=function(e){for(var t,a=new J(e.width,e.height),n=!1,i=!1,r=null,o=null;!a.noMorePixels();)if(n){if(!a.arePixelsToTheRight()){if(t){o=a.y,i=!0;break}t=!0,a.moveDown()}K(e.imageData,a.index)?a.moveRight():(t=!1,a.moveDown())}else K(e.imageData,a.index)?a.moveRight():(r=a.y,n=!0,a.moveDown());return{foundTopText:n,foundBottomText:i,topTextY:r,bottomTextY:o}};function K(e,t){return 0===e.data[t+3]}function X(e,t){return e?window.getComputedStyle(e)[t]:null}var Z=function(e){for(var t=e.ctx,a=e.imageData,n=e.amplitude,i=e.curve,r=.5*a.width||t.width/2,o=n<0?-1:0,c=t.createImageData(a.width,a.height+Math.abs(n)),l=0;l<a.height;l++)for(var s=0;s<a.width;s++){var u=[a.data[4*(l*a.width+s)+0],a.data[4*(l*a.width+s)+1],a.data[4*(l*a.width+s)+2],a.data[4*(l*a.width+s)+3]],h=(s-r)/r,d=l+(Math.round(n*i(h))+o*n);c.data[4*(d*c.width+s)+0]=u[0],c.data[4*(d*c.width+s)+1]=u[1],c.data[4*(d*c.width+s)+2]=u[2],c.data[4*(d*c.width+s)+3]=u[3]}return c},$=function(e){var t=e.ctx,a=e.tCtx,n=e.text,i=void 0===n?"1234567890abcdefghihklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ":n,r=e.fontSize,o=void 0===r?80:r,c=e.fontFamily,l=void 0===c?"AtomicAge":c,s=e.width,u=void 0===s?3400:s,h=e.offsetTop,d=void 0===h?50:h,m=e.distortion,f=void 0===m?0:m,v=e.lineWidth,p=void 0===v?3:v,g=e.fillStyle,x=void 0===g?"#4444f1":g,w=e.strokeStyle,b=void 0===w?"#4444f1":w,y=e.designedSize,E=void 0===y?{width:3600,height:3600}:y,O=E.width,j=E.height,T=t.canvas,S=T.width,k=T.height,C=S/O,N=k/j,P=Math.sqrt(C*C+N*N),I=(O-u)*C/2,A=function(e){var t=e.fontSize||X(e.element,"font-size")||"100px",a=(e.fontWeight||X(e.element,"font-weight")||"normal")+" "+t+" "+(e.fontFamily||X(e.element,"font-family")||"Arial"),n=q(e.text,a),i=document.createElement("canvas"),r=i.getContext("2d");i.width=n.width,i.height=1.2*n.height,r.font=a,r.fillText(e.text,0,t.replace("px",""));var o=r.getImageData(0,0,i.width,i.height),c=V({width:i.width,height:i.height,imageData:o,options:e});return c.foundTopText?c.foundBottomText?{width:n.width,height:c.bottomTextY-c.topTextY,yOffset:-c.topTextY}:{width:n.width,height:i.height-c.topTextY,yOffset:-c.topTextY}:{width:n.width,height:0,yOffset:0}}({text:i,fontSize:"".concat(N*o,"px"),fontFamily:l}),H=A.width,D=A.height,z=C*u/H>1?C*u/H:1,B=N/z*p/2,F={w:C/z*u,h:D},R=0;a.strokeStyle=b,a.fillStyle=x,a.lineWidth=P/z*p,a.textAlign="left",a.font="".concat(N*o,"px ").concat(l),a.fillText(i,R,D+B,C*u),a.strokeText(i,R,D+B,C*u);var L=f*N;if(0!==f){var M=a.getImageData(0,0,F.w,F.h+Math.abs(L)),W=Z({ctx:a,imageData:M,amplitude:L,curve:function(e){return e*e}});a.putImageData(W,R,0)}var Q=new Image;return Q.src=a.canvas.toDataURL(),a.clearRect(0,0,a.canvas.width,a.canvas.height),new Promise(function(e){Q.onload=function(){t.drawImage(Q,0,0,F.w,F.h+2*Math.abs(L),I,d*N,u*C,D+2*Math.abs(L)),e("drown")}})},ee=function(e){var t=e.ctx,a=e.id,n=void 0===a?"elephant":a,i=new Image(t.canvas.width,t.canvas.height);return i.src=b[n],new Promise(function(e){i.onload=function(){t.drawImage(i,0,0,t.canvas.width,t.canvas.height),e("drown")}})},te=function(e,t){var a=t.outline,n=a.color,i=void 0===n?"#f00":n,r=a.lineWidth,o=void 0===r?26:r,c=t.offsetTop-o/2,l=o+t.lineWidth;return e(Object(T.a)({},t,{fillStyle:i,strokeStyle:i,lineWidth:l,offsetTop:c}))},ae=a(88),ne=a.n(ae);function ie(e){var t={url:e,method:"GET"},a={headers:new Headers({"Content-Type":"application/json"})};return t=Object.assign({},a,t),fetch("/textengine"+t.url,t).then(function(e){return e.json().then(function(t){return e.ok?t:(console.log("reject"),Promise.reject(t))})})}var re=function(e,t,a){return ne.a.find(e,ne.a.matchesProperty(t,a))},oe=function(e){return ce.apply(this,arguments)};function ce(){return(ce=Object(_.a)(Q.a.mark(function e(t){var a,n,i,r,o,c,l,s,u,h,d,m,f,v,p,g,x;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ctx,n=t.id,i=void 0===n?"elephant":n,r=t.outline,o=r.color,c=void 0===o?"#ff0":o,l=r.lineWidth,s=void 0===l?40:l,u=new Image(a.canvas.width,a.canvas.height),e.next=4,ie("/JSONS/_".concat(i,".json"));case 4:return h=e.sent,d=h.attributes.viewBox,m=re(h.children,["attributes","id"],"OUTLINE"),f=m.attributes.d,v=m.attributes["stroke-width"],p=v>0?v:s,g='<svg xmlns="http://www.w3.org/2000/svg" viewBox="'.concat(d,'">\n    <path id="OUTLINE" \n    fill="').concat(c,'" \n    stroke="').concat(c,'" \n    stroke-width="').concat(p,'"\n    d="').concat(f,'"/>\n    </svg>'),x=btoa(g),u.src="data:image/svg+xml;base64,"+x,e.abrupt("return",new Promise(function(e){u.onload=function(){a.drawImage(u,0,0,a.canvas.width,a.canvas.height),e("drown")}}));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var le=function(e,t,a){return se.apply(this,arguments)};function se(){return(se=Object(_.a)(Q.a.mark(function e(t,a,n){var i;return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.outline.show,e.t0=i,!e.t0){e.next=5;break}return e.next=5,te($,Object(T.a)({ctx:t,tCtx:a},n.texts[0],{outline:n.outline}));case 5:if(e.t1=i,!e.t1){e.next=9;break}return e.next=9,te($,Object(T.a)({ctx:t,tCtx:a},n.texts[1],{outline:n.outline}));case 9:if(e.t2=i,!e.t2){e.next=13;break}return e.next=13,oe({ctx:t,id:n.mascot,outline:n.outline});case 13:return e.next=15,ee({ctx:t,id:n.mascot});case 15:return e.next=17,$(Object(T.a)({ctx:t,tCtx:a},n.texts[0]));case 17:return e.next=19,$(Object(T.a)({ctx:t,tCtx:a},n.texts[1]));case 19:return e.abrupt("return",new Promise(function(e){t.restore(),e("all are drown")}));case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(e){var t=function(e){var t=Object(n.useState)(e),a=Object(c.a)(t,2),i=a[0],r=a[1];return Object(n.useEffect)(function(){}),[i,r]}(e),a=Object(c.a)(t,2),i=a[0],r=a[1],o=Object(n.useRef)(null),l=Object(n.useRef)(null),s=function(e){o.current.toBlob(function(t){Object(G.saveAs)(t,e)})};function u(){return(u=Object(_.a)(Q.a.mark(function e(t,a,n){return Q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(t,a,n);case 2:(n.saveLQ||n.saveHQ)&&(s("export_LQ_".concat(Date.now(),".png")),r(Object(T.a)({},n,{saveLQ:!1,saveHQ:!1})));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){var e=o.current,t=l.current,a=e.getContext("2d"),n=t.getContext("2d"),r=i.saveHQ?Object(T.a)({},Y):i.canva;e.setAttribute("width",r.width),e.setAttribute("height",r.height),t.setAttribute("width",r.width),t.setAttribute("height",r.height),a.clearRect(0,0,window.innerWidth,window.innerHeight),function(e,t,a){u.apply(this,arguments)}(a,n,i)}),[i,r,o,l]}var he=a(47),de=a.n(he),me=Object(l.a)(function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",margin:"auto",color:e.palette.text.secondary}}});var fe=function(e){var t=e.HQSize,a=Object(R.a)(e,["HQSize"]),r=ue(Object(T.a)({},a)),o=Object(c.a)(r,4),l=o[0],s=o[1],u=o[2],h=o[3];function d(e){s(Object(T.a)({},l,e))}var m=me();return i.a.createElement(n.Fragment,null,i.a.createElement(Ee,null),i.a.createElement(A.a,{container:!0,spacing:3,className:m.root},i.a.createElement(A.a,{item:!0,xs:3},i.a.createElement(H.a,{className:m.paper},i.a.createElement(F,{eventHandler:d,props:l}))),i.a.createElement(A.a,{item:!0,xs:5},i.a.createElement("div",{className:de.a.canvaContainer},i.a.createElement("canvas",{id:"THEMAINCANVAS",className:de.a.canvases,ref:u})),i.a.createElement(A.a,{container:!0,justify:"center"},i.a.createElement(M.a,{variant:"contained","aria-label":"small contained button group"},i.a.createElement(L.a,{onClick:function(){s(Object(T.a)({},l,{saveLQ:!0}))}},"Save as low-quality PNG (72 DPI)"),i.a.createElement(L.a,{onClick:function(){s(Object(T.a)({},l,{saveHQ:!0},t))}},"Save as high-quality PNG (300 DPI)")))),i.a.createElement(A.a,{item:!0,xs:4},i.a.createElement(O,{eventHandler:d}))),i.a.createElement("canvas",{className:k()(de.a.serviceCanvas,de.a.canvases),ref:h}))},ve=a(376),pe=a(377),ge=a(371),xe=a(136),we=function(e){return i.a.createElement(xe.a,e,i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),i.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},be=function(e){return i.a.createElement(xe.a,e,i.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"}))},ye=Object(l.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}});function Ee(){var e=ye();return i.a.createElement(ve.a,{position:"static",style:{background:"transparent",boxShadow:"none"}},i.a.createElement(pe.a,null,i.a.createElement(ge.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},i.a.createElement(we,{color:"primary"})),i.a.createElement(s.a,{variant:"h6",className:e.title,color:"primary"},"Create your style"),i.a.createElement("div",null,i.a.createElement(ge.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit"},i.a.createElement(be,{color:"primary"})))))}a(330),a(331);var Oe=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],r=t[1],o=a?i.a.createElement(fe,Object.assign({HQSize:Y},U)):i.a.createElement("span",{style:{fontFamily:"Arvo"}},"Loading...");return Object(n.useEffect)(function(){r(!0)},[]),i.a.createElement(n.Fragment,null,o)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(Oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},47:function(e,t,a){e.exports={canvases:"Index_canvases__3cujD",canvaContainer:"Index_canvaContainer__xHRDS",serviceCanvas:"Index_serviceCanvas__B4yWI"}}},[[145,1,2]]]);
//# sourceMappingURL=main.5efeafc4.chunk.js.map